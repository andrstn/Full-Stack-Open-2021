(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(17),s=n.n(r),o=(n(22),n(3)),i=n(8),a=n(4),u=n.n(a),l="/api/persons",d=function(){return u.a.get(l).then((function(e){return e.data}))},b=function(e){return u.a.post(l,e).then((function(e){return e.data}))},j=function(e){return u.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},f=function(e,t){return u.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},m=n(0),h=function(e){var t=e.persons,n=e.setPersons,c=e.newName,r=e.setNewName,s=e.newNumber,o=e.setNewNumber,a=e.setNotif,u=t.find((function(e){return e.name==="".concat(c)}));return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===s||""===c)alert("Please put something");else if(void 0===u){var l={name:c,number:s};b(l).then((function(e){a("Added ".concat(l.name)),setTimeout((function(){a(null)}),2e3),n(t.concat(e)),r(""),o("")})).catch((function(e){console.log(e.response.data),a("Invalid(1): ".concat(e.response.data.error)),setTimeout((function(){a(null)}),2e3)}))}else if(void 0!==u)if(u.number!=="".concat(s)){var d=Object(i.a)(Object(i.a)({},u),{},{number:"".concat(s)});console.log(d),window.confirm("".concat(d.name," already exists. Replace old number with the new one?"))&&f(d.id,d).then((function(e){n(t.map((function(e){return e.id!==d.id?e:d}))),a("Updated ".concat(d.name)),setTimeout((function(){a(null)}),2e3),r(""),o("")})).catch((function(e){a("Invalid(1): ".concat(e.response.data.error)),setTimeout((function(){a(null)}),2e3)}))}else alert("This contact already exists!")},children:[Object(m.jsxs)("div",{children:["Name: ",Object(m.jsx)("br",{}),Object(m.jsx)("input",{value:c,onChange:function(e){r(e.target.value)}})]})," ",Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:["Number: ",Object(m.jsx)("br",{}),Object(m.jsx)("input",{value:s,onChange:function(e){o(e.target.value)}})]})," ",Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"ADD"})})]})})},O=function(e){var t=e.persons,n=e.filters,c=(e.setFilters,e.setPersons,e.newName,e.setNewName,e.newNumber,e.setNewNumber,e.deletePerson);return Object(m.jsx)("div",{children:Object(m.jsx)("ul",{children:t.filter((function(e){return e.name.match(new RegExp(n,"i"))})).map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:function(){return c(e.id)},children:"delete"})]},e.name)}))})})},N=function(e){e.persons;var t=e.filters,n=e.setFilters;e.setPersons,e.newName,e.setNewName,e.newNumber,e.setNewNumber;return Object(m.jsx)("div",{children:Object(m.jsx)("form",{children:Object(m.jsxs)("div",{children:["filter shown with",Object(m.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})})})},p=function(e){var t=e.value,n={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===t?null:"Added"===t.split(" ")[0]?(n.color="green",Object(m.jsx)("div",{style:n,children:t})):"Deleted"===t.split(" ")[0]?(n.color="red",Object(m.jsx)("div",{style:n,children:t})):"Updated"===t.split(" ")[0]?(n.color="green",Object(m.jsx)("div",{style:n,children:t})):(n.color="red",Object(m.jsx)("div",{style:n,children:t}))},w=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),a=i[0],u=i[1],l=Object(c.useState)(""),b=Object(o.a)(l,2),f=b[0],w=b[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),g=v[0],P=v[1],y=Object(c.useState)(null),S=Object(o.a)(y,2),k=S[0],T=S[1];Object(c.useEffect)((function(){console.log("effect"),d().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(p,{value:k}),Object(m.jsx)(N,{persons:n,setPersons:r,newName:a,newNumber:f,setNewName:u,setNewNumber:w,filters:g,setFilters:P}),Object(m.jsx)("h3",{children:"Add a new contact"}),Object(m.jsx)(h,{persons:n,setPersons:r,newName:a,newNumber:f,setNewName:u,setNewNumber:w,setNotif:T}),Object(m.jsx)("h3",{children:"Persons"}),Object(m.jsx)(O,{persons:n,setPersons:r,newName:a,newNumber:f,setNewName:u,setNewNumber:w,filters:g,setFilters:P,deletePerson:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&j(e).then((function(c){r(n.filter((function(t){return t.id!==e}))),T("Deleted ".concat(t.name)),setTimeout((function(){T(null)}),2e3)})).catch((function(e){T("Invalid(2): ".concat(t.name," doesn't exist. Perhaps it was already deleted before the re-render")),setTimeout((function(){T(null)}),2e3),r(n.filter((function(e){return e.name!=="".concat(t.name)})))}))}})]})};s.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8f89e5f7.chunk.js.map